<!DOCTYPE html>
<html lang="fr">
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Personnaliser la page de login d’OpenAM &middot;  Jeremy Passeron" />
  	<meta property="og:site_name" content="Jeremy Passeron" />
  	<meta property="og:url" content="https://jeremp.github.io/post/personnaliser-la-page-de-login-dopenam/" />
    
    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2015-10-03T13:32:06&#43;02:00" />

    
    <meta property="og:article:tag" content="sso" />
    
    <meta property="og:article:tag" content="openam" />
    
    

  <title>
     Personnaliser la page de login d’OpenAM &middot;  Jeremy Passeron
  </title>

    <meta name="description" content="Java/web/Iot/Connected-Health developp3r" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://jeremp.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://jeremp.github.io/images/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="https://jeremp.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://jeremp.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://jeremp.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Jeremy Passeron" />
      
      
    
    <meta name="generator" content="Hugo 0.14" />

    <link rel="canonical" href="https://jeremp.github.io/post/personnaliser-la-page-de-login-dopenam/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68415224-1', 'auto');
      ga('send', 'pageview');

    </script>
    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="https://jeremp.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">



<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="https://jeremp.github.io/"><img src="https://jeremp.github.io/img/avatar.png" alt="Home" /></a>
  
  
      <a class="menu-button icon-feed" href="https://jeremp.github.io/index.xml">&nbsp;&nbsp;Subscribe</a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Personnaliser la page de login d’OpenAM</h1>
        <small>comment produire son propre formulaire d&#39;authentification avec le SSO OpenAM</small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2015-10-03T13:32:06&#43;02:00">
            Oct 3, 2015
          </time>
        
         
          <span class="post-tag small"><a href="https://jeremp.github.io/tags/sso/">#sso</a></span>
         
          <span class="post-tag small"><a href="https://jeremp.github.io/tags/openam/">#openam</a></span>
         
        </section>
    </header>
  
    <section class="post-content">
      <p><img src="../../img/openam_logo.png" alt="Logo d'OpenAm" title="Logo d'OpenAm" />
</p>

<p><a href="https://forgerock.org/openam/">OpenAm</a> est un véritable couteau suisse du SSO, à première vue son côté “usine à gaz” peut en rebuter certains (qui lui préféreront sans doute CAS) mais je vous invite à effectuer le tutoriel <a href="http://docs.forgerock.org/en/openam/12.0.0/getting-started/index/index.html#getting-started">Getting Started With OpenAM</a> pour vous faire un avis. Le système extensible d’authentication module d’OpenAM vous permettra d’adapter la mécanique d’authentification si le mode username + password n’est pas suffisant.
Le seul point de difficulté que j’ai personnellement rencontré est la personnalisation de la page de login. Depuis la version 12.0.0, OpenAM propose un système appelé XUI (basé sur des templates javascript et le framework CSS “Less”) qui me paraît plutôt compliqué à prendre en main. Concrètement, si votre projet nécessite un mode d’authentification “exotique” comme par exemple :</p>

<ul>
<li>un premier écran avec un nom d’utilisateur et un password</li>
<li>un second écran avec un second password ou code à saisir</li>
</ul>

<p>Le système d’authentication module vous permettra de décrire et d’implémenter cette logique d’authentification, en revanche vous serez assez limité en ce qui concerne la personnalisation de la partie présentation de vos écrans d’identification sans parler des modes de saisies que vous auriez peut être envie de modifier comme par exemple les claviers virtuels (à la mode sur les sites bancaires) où l’on saisie son code à la souris.</p>

<p>Heureusement OpenAM expose ses services d’authentifications (et d’autres) au travers de <a href="https://backstage.forgerock.com/#!/docs/openam/12.0.0/dev-guide/chap-rest]. Il vous suffit dès lors de réaliser dans votre application les pages d’authentification (aussi complexes soient-elles">web services REST</a>,et d’appeler avec les données saisies par votre utilisateur le web service d’authentification. Ci dessous l’exemple avec la commande cUrl fourni dans la doc  :</p>

<pre><code>curl \
 --request POST \
 --header &quot;X-OpenAM-Username: demo&quot; \
 --header &quot;X-OpenAM-Password: changeit&quot; \
 --header &quot;Content-Type: application/json&quot; \
 --data &quot;{}&quot; \
 https://openam.example.com:8443/openam/json/authenticate
{ &quot;tokenId&quot;: &quot;AQIC5w...NTcy*&quot;, &quot;successUrl&quot;: &quot;/openam/console&quot; }
</code></pre>

<p>Si les identifiants sont valides, le service retourne le fameux jeton d’identification qu’il vous suffit d’attacher en tant que cookie à la session de votre utilisateur. Ceci nécessitera bien sûr que votre instance d’OpenAM tourne sur le même domaine que vos applicatifs (si ce n’est pas le cas sur l’environnement de développement, pensez à faire une correspondance dans votre fichier Host de manière à ce que cela soit le cas) : Si votre OpenAM tourne sur <em>openam.mycompany.com</em> il suffit de modifier votre hosts :</p>

<pre><code>127.0.0.1    localhost mypc.mycompany.com
</code></pre>

<p>Ainsi votre application locale tournera sur le même domaine (<em>mycompany.com</em>) que votre SSO et le partage du cookie sera possible.</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://jeremp.github.io/" style="background-image: url(https://jeremp.github.io/img/avatar.png)"><span class="hidden">Jeremy Passeron's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="https://jeremp.github.io/">Jeremy Passeron</a></h4>
  
  <p>Read <a href="https://jeremp.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Sophia Antipolis, France</span>
    <span class="author-link icon-link"><a href="https://about.me/jeremp">https://about.me/jeremp</a></span>
  </div>
</section>



    
    <section class="share">
      <h4>Share this post</h4>
      <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Personnaliser%20la%20page%20de%20login%20d%e2%80%99OpenAM&amp;url=https%3a%2f%2fjeremp.github.io%2fpost%2fpersonnaliser-la-page-de-login-dopenam%2f"
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <span class="hidden">Twitter</span>
      </a>
      <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjeremp.github.io%2fpost%2fpersonnaliser-la-page-de-login-dopenam%2f"
          onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <span class="hidden">Facebook</span>
      </a>
      <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fjeremp.github.io%2fpost%2fpersonnaliser-la-page-de-login-dopenam%2f"
         onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
          <span class="hidden">Google+</span>
      </a>
    </section>
    

    
    
    

  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Jeremy Passeron</a> &amp;copy; Copyright notice</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://jeremp.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="https://jeremp.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://jeremp.github.io/js/index.js"></script>

</body>
</html>

